// C++ code
//
#include <LiquidCrystal_I2C.h>
LiquidCrystal_I2C lcd(0x20,16,2);


byte obsChar[] = {
  B11111,
  B11111,
  B01110,
  B01110,
  B01110,
  B01110,
  B01110,
  B01110
};

byte playerChar[] = {
  B01110,
  B01010,
  B01110,
  B00100,
  B11111,
  B00100,
  B01010,
  B10001
};

  char obs_char='|';
  char space_char=' ';
  char player_char;
  char frame1[16];
  char frame2[16];
 
  

void setup()
{
  lcd.createChar(player_char, playerChar);
  for(int i=0; i<16;i++)
  {
    if(i==0||i==1||i==4||i==6)
    {
      frame1[i]=obs_char;
    }
    else
    {
    frame1[i]=space_char;
    }
  }
  for(int i=0; i<16;i++)
  {
    if(i==0)
    {
      frame2[i]=player_char;
    }
    else if(i>10)
    {
    frame2[i]=obs_char;
    }
    else
    {
      frame2[i]=space_char;
    }
  }
  Serial.begin(9600);
  lcd.init();
  lcd.backlight();
  lcd.clear();
  lcd.setCursor(0,0);
  lcd.print("****JL Game****"); //message on lcd display
  delay(2000);
  lcd.clear();
  lcd.print("Press y to Start");
  lcd.setCursor(0,1);
  lcd.print("*");
  lcd.setCursor(8,1);
  lcd.print("||  | |");
  lcd.blink(); 
  while(true)
  {
   if(Serial.read()=='y')
   {
     break;
   }
  }
  lcd.clear();
  lcd.noBlink();
}


void loop()
{
  lcd.createChar(obs_char, obsChar);
  lcd.createChar(player_char, playerChar);
  lcd.clear();
  for(int i=0; i<16;i++)
  {
      lcd.print(frame1[i]);
  }
  lcd.setCursor(0,1);
  for(int i=0; i<16;i++)
  {
      lcd.print(frame2[i]);
  }
  delay(5000);
  char user_option=Serial.read();
  switch(user_option)
  {
    case 'w':
    for(int i=0; i<16;i++)
    {
      if(frame1[i]==player_char)
      {
        break;
      }
      else
      {
        if(frame2[i]==player_char)
        {
          if(frame1[i]==space_char)
          {
            frame1[i]=player_char;
            frame2[i]=space_char;
          }
          else
          {
            lcd.clear();
            lcd.print("Game Over.");
            delay(2000);
            lcd.noDisplay();
            lcd.noBacklight();
          }
        }
      }
    }
     break;
    case 'a':
    for(int i=0; i<16;i++)
    {
      if(frame1[0]==player_char||frame2[0]==player_char)
      {
        break;
      }
      else if(frame1[i]==player_char)
      {
        if(frame1[i-1]==space_char)
        {
        frame1[i-1]=player_char;
        frame1[i]=space_char;
        }
        else
        {
          lcd.clear();
          lcd.print("Game Over.");
          delay(2000);
          lcd.noDisplay();
          lcd.noBacklight();
        }
      }
      else if(frame2[i]==player_char)
      {
         if(frame1[i-1]==space_char)
        {
        frame1[i-1]=player_char;
        frame1[i]=space_char;
        }
        else
        {
          lcd.clear();
          lcd.print("Game Over.");
          delay(2000);
          lcd.noDisplay();
          lcd.noBacklight();
        }     
      }
    }
     break;
    case 's':
    for(int i=0; i<16;i++)
    {
      if(frame2[i]==player_char)
      {
        break;
      }
      else
      {
        if(frame1[i]==player_char)
        {
          if(frame2[i]==space_char)
          {
            frame2[i]=player_char;
            frame1[i]=space_char;
          }
          else
          {
            lcd.clear();
            lcd.print("Game Over.");
            delay(2000);
            lcd.noDisplay();
            lcd.noBacklight();
          }
        }
      }
    }
     break;
    case 'd':
     break;
    default:
    break;
  }
}
